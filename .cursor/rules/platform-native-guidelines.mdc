---
description: Platform-native UI principles for iOS, Android, and Web
alwaysApply: true
---

# Platform-Native Guidelines

All platforms must feel authentically native—iOS apps should feel like iOS, Android like Android, web like modern web.

**These are MANDATORY standards. Any violation MUST be reported and fixed.**

---

## Core Principles

1. **Native components, not JS approximations.** Use actual platform components, not JS that mimics their appearance.

2. **Don't override platform defaults.** If the platform handles something automatically (colors, spacing, animations, safe areas), don't fight it.

3. **Less code = more native.** Extensive styling usually means you're overriding native behavior.

---

## Platform Icons

| Platform | Library | Never Use |
|----------|---------|-----------|
| iOS | SF Symbols (`expo-symbols`) | Icon fonts, PNGs, emoji |
| Android | Material Icons (`@expo/vector-icons/MaterialIcons`) | Icon fonts, emoji |
| Web | `lucide-react` | Emoji |

---

## Native-Backed Libraries (Mobile)

| Use | NOT |
|-----|-----|
| `expo-router/unstable-native-tabs` | `@react-navigation/bottom-tabs` (JS-drawn) |
| `@gorhom/bottom-sheet` with native driver | Custom `Animated.View` sheets |
| `react-native-gesture-handler` + `react-native-reanimated` | JS touch handlers, Animated API |
| Native pickers (`@react-native-community/datetimepicker`) | Custom picker implementations |

---

## Design Languages (2026)

| Platform | Pattern | Key Characteristics |
|----------|---------|---------------------|
| iOS 26 | Liquid Glass | Translucent nav/tab bars, `PlatformColor` for system colors |
| Android 16 | Material 3 Expressive | Edge-to-edge mandatory, dynamic Material You colors, spring-based motion, shape morphing |
| Web | Modern CSS | Container queries, `@starting-style`, native `<dialog>`/`popover` |

---

## Animations: Spring Physics (MANDATORY)

All platforms use spring-based motion. **Never use linear or basic ease curves for interactive elements.**

### Android (Material 3 Expressive — REQUIRED tokens)

| Use Case | Spring Config `{ stiffness, damping, mass }` |
|----------|----------------------------------------------|
| Buttons, switches, chips, FABs | `{ 1400, 67, 1 }` (Fast Spatial) |
| Bottom sheets, drawers, cards | `{ 700, 48, 1 }` (Default Spatial) |
| Full-screen page transitions | `{ 300, 31, 1 }` (Slow Spatial) |
| Color/opacity (small) | `{ 3800, 123, 1 }` (Fast Effects) |
| Color/opacity (medium) | `{ 1600, 80, 1 }` (Default Effects) |
| Color/opacity (full-screen) | `{ 800, 57, 1 }` (Slow Effects) |

Source: `material-components-android` v1.13.0+ Motion.md. Full derivation in `docs/ANDROID_16_NATIVE_UX_GUIDANCE.md` section 3.

### iOS

| Use Case | Config |
|----------|--------|
| Button feedback | damping 20, stiffness 300 |
| Card expand | damping 12, stiffness 180 |
| Sheet/page transition | damping 18, stiffness 120-200 |
| Default | damping 15, stiffness 150 |

### Web

Use `cubic-bezier(0.34, 1.56, 0.64, 1)` or the CSS `linear()` spring function.

**Mobile:** `react-native-reanimated` with `withSpring()`

---

## Accessibility

All platforms must respect user preferences:

- **Reduced motion:** Disable/minimize animations when `prefers-reduced-motion` (web) or `useReducedMotion()` hook (mobile)
- **Reduced transparency:** Fall back from glass effects when enabled
- **High contrast:** Increase border weights, avoid low-contrast colors
- **Touch targets:** Minimum 48x48dp on Android, 44x44pt on iOS

---

## Safe Areas

| Platform | Approach |
|----------|----------|
| iOS | Native components handle it; don't add manual padding |
| Android | `useSafeAreaInsets()` from `react-native-safe-area-context` (REQUIRED for edge-to-edge) |
| Web | `env(safe-area-inset-*)` CSS, `pb-safe` Tailwind class |

**NEVER** use `SafeAreaView` from `react-native` — it is deprecated in RN 0.81.

---

## Color Systems

| Platform | Source | Access |
|----------|--------|--------|
| Android | Material You Dynamic Color (wallpaper-derived) | `useTheme()` from `ThemeContext.tsx` |
| iOS | PlatformColor + brand palette | `useTheme()` from `ThemeContext.tsx` |
| Web | CSS custom properties, brand palette | Tailwind theme config |

**Android MUST use `useTheme()` / `useThemeColors()` from `mobile/context/ThemeContext.tsx`. Hardcoded hex colors are forbidden.**

---

## Quick Tests

- **Android:** "Are all animations using M3 spring tokens? Are all colors from `useTheme()`? Is edge-to-edge working?"
- **iOS:** "Would this look identical if built in Swift?" If no, you're overriding native behavior.
- **Web:** "Am I using modern CSS features instead of JS workarounds?" If no, check for native browser APIs.

---

## Detailed Platform Skills

For implementation details, use the specialized skills:
- `.cursor/skills/android-native-expert/` — M3 Expressive, edge-to-edge, Material You, spring tokens, haptics
- `.cursor/skills/ios-native-expert/` — SF Symbols 7, Liquid Glass, haptics
- `.cursor/skills/modern-web-design-expert/` — 2026 CSS, responsive patterns, performance
- `.cursor/skills/feature-parity-check/` — Cross-platform verification workflow

For deep Android research:
- `docs/ANDROID_16_NATIVE_UX_GUIDANCE.md` — Complete implementation guidance
- `docs/ANDROID_16_M3_EXPRESSIVE_RESEARCH.md` — Component patterns and code examples

---

## Reference Implementation

`mobile/app/(tabs)/_layout.tsx` — Minimal code, fully native tabs, platform icons
